"undefined"==typeof window.iconfall&&(window.iconfall={});
function Icon(){this.velocity=new Vector(1,1);this.location=new Location(-50,-50);this.valid=!0;this.loadImage=function(){var a=this,b=this.image=new Image,d=a.source;b.src=d;b.onload=function(){info('Loaded icon at "'+d+'"');a.parent.iconBin.push(a)};b.onerror=function(){error('Failed to load icon at "'+d+'"');a.valid=!1}};this.loadLocation=function(){var a=c.parent.settings.SPAWN,b=c.parent.canvas,d=a.SIDE;a.SIDE==RANDOM&&(d=SPAWN_SIDES[Math.floor(Math.random()*SPAWN_SIDES.length)]);-1==SPAWN_SIDES.indexOf(d)&&
(error("Couldn't find icon spawn side. Setting to default (NORTH)"),d=NORTH);var f=b.width,e;if(d==EAST||d==WEST)f=b.height;a=a.LOCATION;"number"!=typeof a&&(-1==SPAWN_LOCATION.indexOf(a)&&(error("Couldn't find icon spawn type. Setting to default (RANDOM)"),a=RANDOM),a==CENTER&&(e=f/2),a==RANDOM&&(e=Math.floor(Math.random()*f)));d!=NORTH&&d!=SOUTH||this.getLocation().setX(e);d!=EAST&&d!=WEST||this.getLocation().setY(e)};this.tick=function(){this.velocity.updateLocation(this.location)};this.getLocation=
function(){return this.location};this.getVelocity=function(){return this.velocity};this.clone=function(){return new Icon(c.source,c.parent,c.image)};var c=this;(function(a,b,d){"undefined"!=typeof d?(this.image=d,this.parent=b):(this.source=a,this.parent=b,c.loadImage());c.loadLocation()}).apply(this,arguments)}iconfall.Icon=Icon;"undefined"==typeof window.iconfall&&(window.iconfall={});
var NORTH="NORTH",EAST="EAST",SOUTH="SOUTH",WEST="WEST",RANDOM="RANDOM",RANDOM_REPEATING="RANDOM_REPEATING",ORDERED="ORDERED",CENTER="CENTER",SPAWN_SIDES=[NORTH,SOUTH,EAST,WEST],SPAWN_LOCATION=[RANDOM,CENTER],SPAWN_TYPES=[RANDOM,RANDOM_REPEATING,ORDERED],CIRCULAR="CIRCULAR",DESPAWN="DESPAWN",BREAK="BREAK";
function Iconfall(){this.settings={GRAVITY:{DIRECTION:"SOUTH",ACCELERATION:10,TERMINAL_VELOCITY:50,ENABLED:!1},VELOCITY:{X:{MIN:0,MAX:0},Y:{MIN:1,MAX:2}},SPAWN:{SIDE:NORTH,LOCATION:CENTER,TYPE:ORDERED,MAX:5,DELAY:2500,ON_LOAD:!0},EDGE:{TYPE:"DESPAWN",ROTATIONS:3,AXIS:"X"}};this.iconBin=[];this.icons=[];this.updateCanvas=function(){var a=document.getElementById(c.id);this.ctx=a.getContext("2d");a.width=parseInt(a.style.width,10);a.height=parseInt(a.style.height,10);this.ctx.rect(0,0,500,500);this.ctx.stroke();
c.canvas=a};this.loadIcons=function(){var a=this.iconData;if("[object Object]"==Object.prototype.toString.call(a)){info("Icons loading as Map");var b=a.SOURCE;if("undefined"==typeof b){error("Couldn't find icon source");return}var d=a.ICONS;if("undefined"==typeof d||"[object Array]"!=Object.prototype.toString.call(d)){error("Couldn't find icons. Is icons an array?"+Object.prototype.toString.call(d));return}var f="";"undefined"!=typeof a.FILE_TYPE&&(f="."+a.FILE_TYPE);for(var e=0;e<d.length;e++)new Icon(b+
d[e]+f,c)}if("[object Array]"==Object.prototype.toString.call(a))for(info("Icons loading as Array"),b=0;b<a.length;b++)new Icon(a[b],c);"string"==typeof a&&(info("Icons loading as String"),new Icon(a,c))};this.updateSettings=function(a){};this.getIcons=function(){return this.icons};var c=this;(function(a,b){this.iconData=b;this.id=a;c.updateCanvas();c.loadIcons();new Renderer(this)}).apply(this,arguments)}iconfall.Iconfall=Iconfall;"undefined"==typeof window.iconfall&&(window.iconfall={});
function Location(){this.y=this.x=0;this.update=function(a,b){this.x=a;this.y=b};this.increment=function(a,b){this.x+=a;this.y+=b};this.getX=function(){return this.x};this.setX=function(a){this.x=a};this.setY=function(a){this.y=a};this.getY=function(){return this.y};this.toString=function(){return"("+this.x+","+this.y+")"};var c=this;(function(a,b){"undefined"!=typeof a&&(c.x=a);"undefined"!=typeof b&&(c.y=b)}).apply(this,arguments)}iconfall.Location=Location;
"undefined"==typeof window.iconfall&&(window.iconfall={});function Vector(){this.y=this.x=0;this.updateLocation=function(a){a.increment(this.x,this.y)};this.update=function(a,b){this.x=a;this.y=b};this.toString=function(){return"("+this.x+","+this.y+")"};var c=this;(function(a,b,d){"undefined"!=typeof a&&(c.x=a);"undefined"!=typeof b&&(c.y=b)}).apply(this,arguments)}iconfall.Vector=Vector;var VERSION="v1.0.0",INFO="INFO",WARNING="WARNING",ERROR="ERROR",VERBOSE=!0;
function log(c,a){console.log("Iconfall "+c+" >> "+a)}function info(c){VERBOSE&&log(INFO,c)}function error(c){log(ERROR,c)}"undefined"==typeof window.iconfall&&(window.iconfall={});
function Renderer(){function c(){b.parent.ctx.clearRect(0,0,b.parent.canvas.width,b.parent.canvas.height);b.parent.ctx.beginPath();var d=(new Date).getTime(),f=d-b.lastTime;!0===b.firstSpawn&&(b.firstSpawn=!1,a(!0));f>b.waitTime&&(b.lastTime=d,a());for(d=0;d<b.parent.getIcons().length;d++){var f=b.parent.getIcons()[d],e=f.getLocation();b.parent.ctx.drawImage(f.image,f.getLocation().getX(),f.getLocation().getY(),50,50);e.getX()>b.parent.canvas.width+40&&e.setX(-40);e.getY()>b.parent.canvas.height+
40&&e.setY(-40);f.tick()}b.animationID=requestAnimationFrame(c)}function a(a){var c=b.parent.settings.SPAWN,e=b.parent.iconBin,g=b.parent.icons;if(1>e.length||c.MAX<=g.length)"undefined"!=typeof a&&(b.firstSpawn=!0);else{a=c.TYPE;c=0;if(a==RANDOM||a==RANDOM_REPEATING)c=Math.floor(Math.random()*e.length);c=e[c];a!=RANDOM&&a!=ORDERED||e.splice(e.indexOf(c),1);g.push(c.clone())}}this.animationID=void 0;this.lastTime=(new Date).getTime();this.waitTime=1E3;this.firstSpawn=!1;var b=this;(function(a){b.parent=
a;b.animationID=requestAnimationFrame(c);a=a.settings;var f=a.SPAWN.DELAY;"number"==typeof f&&(b.waitTime=f);1==a.SPAWN.ON_LOAD&&(b.firstSpawn=!0)}).apply(this,arguments)}iconfall.Renderer=Renderer;
